import{cd as c,a as ne,ce as Z,k as se,r as ce,j as s,e as ie,b as x,d as k,F as P,B as oe,cf as le,y as H,m as de,C as ue,cg as me}from"./index-BR7e0FAz.js";import{a as pe}from"./ordersApiSlice-D_qTd9uo.js";var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[624,626],[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[622019,622999],[62207,62209],[622126,622925],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,504174],[504176,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,63737423,63743358,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}},z={},R={};Object.defineProperty(R,"__esModule",{value:!0}),R.clone=void 0,R.clone=function(e){return e?JSON.parse(JSON.stringify(e)):null};var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.matches=void 0,w.matches=function(e,r){return Array.isArray(r)?(function(a,t,o){var p=String(t).length,u=a.substr(0,p),f=parseInt(u,10);return t=parseInt(String(t).substr(0,u.length),10),o=parseInt(String(o).substr(0,u.length),10),f>=t&&f<=o})(e,r[0],r[1]):(function(a,t){return(t=String(t)).substring(0,a.length)===a.substring(0,t.length)})(e,r)},Object.defineProperty(z,"__esModule",{value:!0}),z.addMatchingCardsToResults=void 0;var he=R,ye=w;z.addMatchingCardsToResults=function(e,r,a){var t,o;for(t=0;t<r.patterns.length;t++){var p=r.patterns[t];if(ye.matches(e,p)){var u=he.clone(r);o=Array.isArray(p)?String(p[0]).length:String(p).length,e.length>=o&&(u.matchStrength=o),a.push(u);break}}};var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.isValidInputType=void 0,A.isValidInputType=function(e){return typeof e=="string"||e instanceof String};var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.findBestMatch=void 0,V.findBestMatch=function(e){return(function(r){var a=r.filter((function(t){return t.matchStrength})).length;return a>0&&a===r.length})(e)?e.reduce((function(r,a){return r?Number(r.matchStrength)<Number(a.matchStrength)?a:r:a})):null};var D=K&&K.__assign||function(){return D=Object.assign||function(e){for(var r,a=1,t=arguments.length;a<t;a++)for(var o in r=arguments[a])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},D.apply(this,arguments)},te=fe,ge=z,ve=A,be=V,I=R,S={},h={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},re=[h.VISA,h.MASTERCARD,h.AMERICAN_EXPRESS,h.DINERS_CLUB,h.DISCOVER,h.JCB,h.UNIONPAY,h.MAESTRO,h.ELO,h.MIR,h.HIPER,h.HIPERCARD],v=I.clone(re);function q(e){return S[e]||te[e]}function U(e,r){r===void 0&&(r=!1);var a=v.indexOf(e);if(!r&&a===-1)throw new Error('"'+e+'" is not a supported card type.');return a}function g(e){var r=[];if(!ve.isValidInputType(e))return r;if(e.length===0)return v.map((function(t){return I.clone(q(t))}));v.forEach((function(t){var o=q(t);ge.addMatchingCardsToResults(e,o,r)}));var a=be.findBestMatch(r);return a?[a]:r}g.getTypeInfo=function(e){return I.clone(q(e))},g.removeCard=function(e){var r=U(e);v.splice(r,1)},g.addCard=function(e){var r=U(e.type,!0);S[e.type]=e,r===-1&&v.push(e.type)},g.updateCard=function(e,r){var a=S[e]||te[e];if(!a)throw new Error('"'+e+"\" is not a recognized type. Use `addCard` instead.'");if(r.type&&a.type!==r.type)throw new Error("Cannot overwrite type parameter.");var t=I.clone(a);t=D(D({},t),r),S[t.type]=t},g.changeOrder=function(e,r){var a=U(e);v.splice(a,1),v.splice(r,0,e)},g.resetModifications=function(){v=I.clone(re),S={}},g.types=h;var y=g,xe={niceType:"Dankort",type:"dankort",patterns:[5019],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},Ce={niceType:"Laser",type:"laser",patterns:[6706,6771,6709],gaps:[4,8,12],lengths:[16,19],code:{name:"CVV",size:3}},_e={niceType:"Visa Electron",type:"visa-electron",patterns:[4026,417500,4405,4508,4844,49137],gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},Ee=function(e){var r,a,t=String(e).replace(/[\s]/g,""),o=t.length,p=!1,u=0;if(!/^[0-9]+$/.test(t))return!1;for(var f=o;f>0;f--){if(r=parseInt(t.charAt(f-1)),p){switch(a=2*r){case 10:a=1;break;case 12:a=3;break;case 14:a=5;break;case 16:a=7;break;case 18:a=9}u+=a}else u+=r;p=!p}return u!==0&&u%10==0},Ne=function(e){var r=y(e.toString().trim().replace(" ",""));if(r.length===1){var a=r.shift();return a?.type||"unknown"}return"unknown"},F=function(){return y.updateCard(y.types.MAESTRO,{patterns:[493698,[5e3,5018],[502e3,506698],[506779,508999],[56,59],63,67,6]}),y.updateCard(y.types.HIPERCARD,{patterns:[384100,384140,384160,606282,637095,637568]}),y.addCard(xe),y.addCard(Ce),y.addCard(_e),Object.values(y.types).concat(["dankort","laser","visa-electron"])},j={amex:["amex","americanexpress","american-express"],dinersclub:["diners","dinersclub","diners-club"]};function ee(e){var r=e.acceptedCards,a=r===void 0?[]:r,t=e.number,o=e.issuer,p=e.preview,u=p!==void 0&&p,f=e.expiry,M=e.cvc,i=e.focused,C=e.locale,L=C===void 0?{valid:"valid thru"}:C,T=e.name,J=e.placeholders,ae=J===void 0?{name:"YOUR NAME HERE"}:J,B=e.callback,Y=c.useState(F()),b=Y[0],$=Y[1],W=c.useMemo((function(){return a?.length?b.filter((function(l){return a.includes(l)})):b}),[a,b]),_=c.useMemo((function(){var l="unknown";if(t){var n=Ne(t);W.includes(n)&&(l=n)}var d=16;return j.amex.includes(l)?d=15:j?.dinersclub.includes(l)?d=14:["hipercard","mastercard","visa"].includes(l)&&(d=19),{issuer:l,maxLength:d}}),[t,W]),E=c.useMemo((function(){return u&&o?o.toLowerCase():_.issuer}),[_.issuer,o,u]),N=c.useMemo((function(){var l=u?19:_.maxLength,n=typeof t=="number"?t.toString():String(t).replace(/[A-Za-z]| /g,"");for(isNaN(parseInt(n,10))&&!u&&(n=""),l>16&&(l=n.length<=16?16:l),n.length>l&&(n=n.slice(0,l));n.length<l;)n+="•";if(j.amex.includes(E)||j.dinersclub.includes(E)){var d=[0,4,10],m=[4,6,5];n="".concat(n.substr(d[0],m[0])," ").concat(n.substr(d[1],m[1])," ").concat(n.substr(d[2],m[2]))}else if(n.length>16)d=[0,4,8,12],m=[4,7],n="".concat(n.substr(d[0],m[0])," ").concat(n.substr(d[1],m[0])," ").concat(n.substr(d[2],m[0])," ").concat(n.substr(d[3],m[1]));else for(var O=1;O<l/4;O++){var Q=4*O+(O-1);n="".concat(n.slice(0,Q)," ").concat(n.slice(Q))}return n}),[_.maxLength,E,t,u]),G=c.useMemo((function(){var l,n=typeof f=="number"?f.toString():f,d="",m="";for(n.includes("/")?(d=(l=n.split("/"))[0],m=l[1]):n.length&&(d=n.substr(0,2),m=n.substr(2,6));d.length<2;)d+="•";for(m.length>2&&(m=m.substr(2,4));m.length<2;)m+="•";return"".concat(d,"/").concat(m)}),[f]),X=c.useCallback((function(l){if(l.length)$(b.filter((function(d){return l.includes(d)})));else{var n=F();$(n)}}),[b]);return c.useEffect((function(){N!==t&&typeof B=="function"&&B(_,Ee(String(t))),F().toString()!==b.toString()&&X(a)}),[a,B,_,N,X,t,b]),c.createElement("div",{key:"Cards",className:"rccs","data-testid":"rccs"},c.createElement("div",{"data-testid":"rccs__card",className:["rccs__card","rccs__card--".concat(E),i==="cvc"&&E!=="american-express"?"rccs__card--flipped":""].join(" ").trim()},c.createElement("div",{className:"rccs__card--front"},c.createElement("div",{className:"rccs__card__background"}),c.createElement("div",{className:"rccs__issuer"}),c.createElement("div",{className:["rccs__cvc__front",i==="cvc"?"rccs--focused":""].join(" ").trim()},M),c.createElement("div",{className:["rccs__number",N.replace(/ /g,"").length>16?"rccs__number--large":"",i==="number"?"rccs--focused":"",N.substr(0,1)!=="•"?"rccs--filled":""].join(" ").trim()},N),c.createElement("div",{className:["rccs__name",i==="name"?"rccs--focused":"",T?"rccs--filled":""].join(" ").trim()},T||ae.name),c.createElement("div",{className:["rccs__expiry",i==="expiry"?"rccs--focused":"",G.substr(0,1)!=="•"?"rccs--filled":""].join(" ").trim()},c.createElement("div",{className:"rccs__expiry__valid"},L.valid),c.createElement("div",{className:"rccs__expiry__value"},G)),c.createElement("div",{className:"rccs__chip"})),c.createElement("div",{className:"rccs__card--back"},c.createElement("div",{className:"rccs__card__background"}),c.createElement("div",{className:"rccs__stripe"}),c.createElement("div",{className:"rccs__signature"}),c.createElement("div",{className:["rccs__cvc",i==="cvc"?"rccs--focused":""].join(" ").trim()},M),c.createElement("div",{className:"rccs__issuer"}))))}const je=ne.injectEndpoints({endpoints:e=>({payOrder:e.mutation({query:r=>({url:`${Z}`,method:"POST",body:{paymentInfo:r}})}),cancelOrder:e.query({query:()=>({url:`${Z}/refundPayment`}),keepUnusedDataFor:5})})}),{usePayOrderMutation:Se}=je,Re=()=>{const{id:e}=se(),{data:r}=pe(e,{skip:!e}),[a]=Se(),[t,o]=ce.useState({number:"",expiry:"",cvc:"",name:"",focus:void 0}),p=i=>{const{name:C,value:L}=i.target;o(T=>({...T,[C]:L}))},u=i=>{o(C=>({...C,focus:i.target.name}))},f=async()=>{try{if(!r)throw new Error("Order details not found");(await a(le(r,t)).unwrap()).status==="success"?H.success("Payment successful!"):H.error("Payment failed. Please try again.")}catch(i){console.error("Payment failed:",i),H.error("Payment failed. Please try again.")}},M=i=>{i.preventDefault()};return s.jsx(ie,{className:"px-4 py-5 rounded-4 shadow mt-2",style:{maxWidth:"850px",backgroundColor:"#f8f9fa",border:"1px solid #e0e0e0"},children:s.jsxs(x,{className:"align-items-center",children:[s.jsx(k,{md:6,className:"mb-4 mb-md-0",children:s.jsxs(x,{children:[s.jsx(x,{className:"mb-4",children:s.jsx(ee,{number:t.number,expiry:t.expiry,cvc:t.cvc,name:t.name,focused:t.focus!=="cvc"?t.focus:void 0})}),s.jsx(x,{children:s.jsx(ee,{number:t.number,expiry:t.expiry,cvc:t.cvc,name:t.name,focused:"cvc"})})]})}),s.jsx(k,{md:6,children:s.jsxs(P,{onSubmit:M,className:"ps-0 ps-md-5",children:[[{id:"cardNumber",label:"Card Number",name:"number",placeholder:"5526080000000006",maxLength:16},{id:"cardName",label:"Card Holder Name",name:"name",placeholder:"Mehmet Test"},{id:"cardExpiry",label:"Expiry",name:"expiry",placeholder:"11/28",maxLength:5},{id:"cardCvc",label:"CVC",name:"cvc",placeholder:"245",maxLength:3}].map(i=>s.jsxs(P.Group,{className:"mb-3",controlId:i.id,children:[s.jsx(P.Label,{className:"fw-semibold",style:{color:"#495057"},children:i.label}),s.jsx(P.Control,{type:"text",name:i.name,placeholder:i.placeholder,value:t[i.name],onChange:p,onFocus:u,maxLength:i.maxLength||void 0,className:"rounded-3 border-1 border-light shadow-sm p-2",style:{fontSize:"0.95rem",color:"#212529"}})]},i.id)),s.jsx("div",{className:"text-center mt-4",children:s.jsx(oe,{type:"submit",className:"w-50 py-2 rounded-3",style:{backgroundColor:"#343a40",color:"#fff",border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s"},onClick:f,children:"Pay Now"})})]})})]})})},Te=()=>s.jsx(de.div,{initial:{y:-200,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},style:{backgroundColor:"#fdfdfd",minHeight:"80dvh",paddingTop:"60px",paddingBottom:"60px"},children:s.jsxs(ue,{children:[s.jsx(x,{className:"justify-content-center",children:s.jsx(k,{xs:12,md:10,lg:8,children:s.jsxs("div",{className:"text-center mb-5",children:[s.jsxs("h1",{style:{fontSize:"2rem",fontWeight:500,color:"#2c2f33",marginBottom:"10px"},children:[s.jsx(me,{style:{marginRight:"10px",color:"#6c757d"}}),"Card Information"]}),s.jsx("p",{style:{color:"#6c757d",fontSize:"0.95rem"},children:"Complete your order safely and quickly"})]})})}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx(x,{children:s.jsx(k,{xs:12,md:12,lg:12,children:s.jsx(Re,{})})})}),s.jsxs(x,{className:"d-flex justify-content-center text-muted",style:{marginTop:"100px"},children:["We are here to help! If you have any questions or need assistance, please contact our customer support team at"," ",s.jsx("p",{className:"text-center mt-2",children:s.jsx("a",{href:"mailto:burak.canbaz.web@gmail.com",children:"burak.canbaz.web@gmail.com"})})]})]})});export{Te as default};

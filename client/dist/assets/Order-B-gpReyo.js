import{k as g,g as y,r as N,j as s,c as f,M as c,m as C,C as b,b as a,d as e,c5 as I,I as v,L as O,B as x,e as w,y as P}from"./index-BR7e0FAz.js";import{a as $,b as k}from"./ordersApiSlice-D_qTd9uo.js";import{L as d}from"./ListGroup-CPytsWHT.js";const F=()=>{const{id:i}=g(),l=y(),{data:r,isLoading:h,error:t}=$(i,{skip:!i}),[m]=k(),[j,o]=N.useState(!1);if(j)throw o(!1),new Error("Order component error.");const p=async()=>{if(i)try{await m(i).unwrap(),P.success("Order cancelled"),l("/profile")}catch{o(!0)}};return h?s.jsx(f,{}):t?s.jsx(c,{variant:"danger",children:t.error||t.message||t.data}):s.jsx(C.div,{initial:{y:-200,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},children:s.jsx(b,{children:s.jsxs(a,{children:[s.jsx(e,{xs:10,md:8,className:"mx-auto mb-4",children:s.jsxs(d,{variant:"flush",children:[s.jsxs(d.Item,{className:"order-details",children:[s.jsx("h2",{className:"mb-4",children:"Shipping Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Name: "})," ",r?.user?.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email: "})," ",r?.user?.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Address: "})," ",r?.shippingAddress?.address," ,"," ",r?.shippingAddress?.city,","," ",r?.shippingAddress?.postalCode,","," ",r?.shippingAddress?.country]})]}),s.jsxs(d.Item,{children:[s.jsx("h2",{children:"Payment Method"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Method: "})," Credit Card"]}),r?.isPaid?s.jsxs(c,{variant:"success",children:["Paid at ",I(r?.paidAt)]}):s.jsx(c,{variant:"danger",children:"Not paid yet."})]}),s.jsxs(d.Item,{children:[s.jsx("h2",{children:"Order Items"}),r?.orderItems?.map((n,u)=>s.jsx(d.Item,{style:{border:window.innerWidth>=768?"1px solid #dee2e6":"none"},children:s.jsxs(a,{children:[s.jsx(e,{md:1,children:s.jsx(v,{src:n.image,alt:n.name,fluid:!0,rounded:!0})}),s.jsx(e,{md:4,className:"my-2 my-md-auto",children:s.jsx(O,{to:`/product/${n.product}`,children:s.jsx("strong",{children:n.name})})}),s.jsxs(e,{md:4,className:"my-0 my-md-auto mb-1 mb-md-0",children:[n.qty," x $",n.price," ="," ",s.jsxs("strong",{children:["$",(n.qty*n.price).toFixed(2)]})]})]})},u))]}),s.jsx(d.Item,{className:"text-end",children:s.jsx(x,{className:"btn btn-danger mt-3 mb-2",onClick:p,children:"Cancel Order"})})]})}),s.jsxs(e,{xs:10,md:3,lg:4,className:"mx-auto",children:[s.jsx(w,{children:s.jsxs(d,{variant:"flush",children:[s.jsx(d.Item,{className:"bg-light",children:s.jsx("div",{className:"text-center fs-3 fw-semibold",children:"Order Summary"})}),s.jsx(d.Item,{className:"p-2",children:s.jsxs(a,{className:"gap-2 text-center mx-auto",children:[s.jsxs(a,{children:[s.jsx(e,{children:s.jsx("strong",{children:"Items:"})}),s.jsx(e,{children:s.jsxs("strong",{children:["$",r?.itemsPrice.toFixed(2)]})})]}),s.jsxs(a,{children:[s.jsx(e,{children:s.jsx("strong",{children:"Shipping:"})}),s.jsx(e,{children:s.jsxs("strong",{children:["$",r?.shippingPrice.toFixed(2)]})})]}),s.jsxs(a,{children:[s.jsx(e,{children:s.jsx("strong",{children:"Tax:"})}),s.jsx(e,{children:s.jsxs("strong",{children:["$",r?.taxPrice.toFixed(2)]})})]}),s.jsxs(a,{children:[s.jsx(e,{children:s.jsx("strong",{children:"Total:"})}),s.jsx(e,{children:s.jsxs("strong",{children:["$",r?.totalPrice.toFixed(2)]})})]}),s.jsx(a,{children:s.jsx(e,{className:"mt-3",children:s.jsx(x,{className:"w-50",style:{border:"none",backgroundColor:"#e9682a"},onClick:n=>{n.preventDefault(),l(`/pay/${i}`)},children:"Pay Now"})})})]})})]})}),s.jsx(a,{className:"mt-3",children:s.jsx(e,{})})]})]})})})};export{F as default};
